import { useEffect, useRef } from "react";
import { gsap } from "gsap";
import Lenis from "@studio-freight/lenis";

import { ScrollTrigger } from "gsap/ScrollTrigger";

export default function NavBar({ sectionRefs }) {
  const navBar = useRef(null);
  const logo = useRef(null);
  const cta = useRef(null);
  const tl = gsap.timeline();
  gsap.registerPlugin(ScrollTrigger);

  useEffect(() => {
    const lenis = new Lenis();
    function raf(time) {
      lenis.raf(time);
      requestAnimationFrame(raf);
    }
    requestAnimationFrame(raf);
  });

  useEffect(() => {
    tl.to(navBar.current, {
      y: 0,
      duration: 3,
      delay: 0.5,
      ease: "power4.inOut",
    });
  });


  useEffect(() => {
    sectionRefs.forEach((section) => {
      ScrollTrigger.create({
        trigger: section,
        start: "top 375px",
        end: "bottom 300px",
        // markers: true,
        animation: gsap
          .timeline()
          .to(navBar.current, { color: "#DDDDD5" })
          .to(cta.current, { backgroundColor: "#D1D1C7", color: "#0E0E0C" }, 0)
          .to(".bg-secondary-100", { backgroundColor: "#0E0E0C" }, 0),

        toggleActions: "restart reverse restart reverse",
      });
    });

  });

  return (
    <header
      ref={navBar}
      className="fixed top-0 z-50 flex w-full -translate-y-full items-center justify-between bg-secondary-100 px-5 py-3"
    >
      {/* logo */}
      <a href="#hero" aria-label="Logo" className="z-50">
        {/* <svg
          ref={logo}
          width="80"
          height="45"
          viewBox="0 0 121 45"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M10.08 25.3774V36.6974H3.24V7.97739H10.08V17.4974C10.8533 16.6441 11.68 15.9774 12.56 15.4974C13.44 15.0174 14.56 14.7774 15.92 14.7774C18.0533 14.7774 19.7867 15.4707 21.12 16.8574C22.48 18.2441 23.16 20.2441 23.16 22.8574V36.6974H16.32V25.1374C16.32 23.7774 16.0667 22.7374 15.56 22.0174C15.08 21.2974 14.32 20.9374 13.28 20.9374C12.72 20.9374 12.1867 21.0841 11.68 21.3774C11.2 21.6707 10.8133 22.1374 10.52 22.7774C10.2267 23.4174 10.08 24.2841 10.08 25.3774ZM38.2188 27.4574V15.1774H45.0588V36.6974H38.7788V34.3774C38.1921 35.1774 37.3521 35.8307 36.2588 36.3374C35.1921 36.8441 34.0321 37.0974 32.7788 37.0974C31.3654 37.0974 30.0854 36.8041 28.9388 36.2174C27.7921 35.6041 26.8854 34.6841 26.2188 33.4574C25.5788 32.2041 25.2588 30.6307 25.2588 28.7374V15.1774H32.0988V27.4574C32.0988 28.6307 32.3654 29.5107 32.8988 30.0974C33.4588 30.6841 34.2188 30.9774 35.1788 30.9774C35.6321 30.9774 36.0854 30.8574 36.5388 30.6174C37.0188 30.3507 37.4188 29.9641 37.7388 29.4574C38.0588 28.9241 38.2188 28.2574 38.2188 27.4574ZM68.2013 15.1774L57.9613 44.4174H50.4813L53.4813 36.4574L45.0812 15.1774H52.5213L57.1613 28.4974L61.3213 15.1774H68.2013ZM75.0956 25.3774V36.6974H68.2556V15.1774H74.5356V17.7774C75.389 16.8441 76.3223 16.1107 77.3356 15.5774C78.3756 15.0441 79.5756 14.7774 80.9356 14.7774C83.069 14.7774 84.8023 15.4707 86.1356 16.8574C87.4956 18.2441 88.1756 20.2441 88.1756 22.8574V36.6974H81.3356V25.1374C81.3356 23.7774 81.0823 22.7374 80.5756 22.0174C80.0956 21.2974 79.3356 20.9374 78.2956 20.9374C77.7356 20.9374 77.2023 21.0841 76.6956 21.3774C76.2156 21.6707 75.829 22.1374 75.5356 22.7774C75.2423 23.4174 75.0956 24.2841 75.0956 25.3774ZM100.074 44.8174C98.101 44.8174 96.3544 44.4707 94.8344 43.7774C93.3144 43.1107 92.1144 42.1507 91.2344 40.8974C90.3544 39.6441 89.8744 38.1907 89.7944 36.5374H96.4344C96.5677 37.4974 96.9277 38.2307 97.5144 38.7374C98.1277 39.2441 98.9677 39.4974 100.034 39.4974C101.314 39.4974 102.274 39.1641 102.914 38.4974C103.581 37.8307 103.914 36.8441 103.914 35.5374V33.0174C103.354 33.8174 102.594 34.4441 101.634 34.8974C100.674 35.3507 99.6077 35.5774 98.4344 35.5774C96.701 35.5774 95.1277 35.1241 93.7144 34.2174C92.301 33.2841 91.181 32.0307 90.3544 30.4574C89.5277 28.8841 89.1144 27.1241 89.1144 25.1774C89.1144 23.1507 89.501 21.3641 90.2744 19.8174C91.0477 18.2441 92.1144 17.0174 93.4744 16.1374C94.8344 15.2307 96.3944 14.7774 98.1544 14.7774C99.5144 14.7774 100.701 14.9907 101.714 15.4174C102.728 15.8174 103.648 16.4707 104.474 17.3774V15.1774H110.754V35.4574C110.754 38.3641 109.794 40.6441 107.874 42.2974C105.981 43.9774 103.381 44.8174 100.074 44.8174ZM96.0344 25.2174C96.0344 26.5507 96.381 27.6174 97.0744 28.4174C97.7677 29.2174 98.6877 29.6174 99.8344 29.6174C100.634 29.6174 101.328 29.4307 101.914 29.0574C102.528 28.6841 102.994 28.1641 103.314 27.4974C103.661 26.8307 103.834 26.0574 103.834 25.1774C103.834 23.8441 103.461 22.7774 102.714 21.9774C101.994 21.1507 101.034 20.7374 99.8344 20.7374C98.6877 20.7374 97.7677 21.1507 97.0744 21.9774C96.381 22.7774 96.0344 23.8574 96.0344 25.2174Z" />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M113.5 1.5H111V6.50001H113.5C112.119 6.50001 111 7.61931 111 9.00001V11.5H116V9.00001C116 10.3807 117.119 11.5 118.5 11.5H121V6.50001H118.5C119.881 6.50001 121 5.38072 121 4V1.5H116V4C116 2.61929 114.881 1.5 113.5 1.5ZM116 6.50001H113.5C114.881 6.50001 116 7.61931 116 9.00001V6.50001ZM116 6.50001V4C116 5.38072 117.119 6.50001 118.5 6.50001H116Z"
          />
        </svg> */}

        <svg 
          width="115" 
          height="32" 
          viewBox="0 0 115 32" 
          fill="currentColor" x
          mlns="http://www.w3.org/2000/svg">
          <path d="M18.5423 7.784L6.28625 31.176H0.49425L4.14225 24.808L0.78225 7.784H6.12625L7.82225 18.6L12.8463 7.784H18.5423ZM26.6738 25L26.9938 23.272C25.8738 24.648 24.2738 25.32 22.0978 25.32C18.9618 25.32 16.8818 23.464 16.8818 20.68C16.8818 17.032 20.1778 14.696 25.3298 14.696C26.2898 14.696 27.1538 14.76 27.6978 14.888L27.8578 14.088C28.1458 12.616 27.3138 11.656 25.7458 11.656C24.1778 11.656 23.3138 12.424 23.0258 14.088H18.2578C18.5778 9.992 21.6498 7.464 26.3218 7.464C30.8658 7.464 33.5218 10.312 32.8178 14.376L30.9298 25H26.6738ZM21.9698 20.008C21.9698 20.936 22.8338 21.64 23.9858 21.64C25.5858 21.64 26.7378 20.712 26.9938 19.24L27.1858 18.12C26.4818 17.96 25.7778 17.896 25.1058 17.896C23.0898 17.896 21.9698 18.664 21.9698 20.008ZM49.8698 19.336C49.8698 22.696 47.0858 25.32 42.0618 25.32C37.5178 25.32 34.3498 22.792 34.3498 18.888H39.4378C39.4378 20.264 40.4618 21.416 42.4138 21.416C43.5978 21.416 44.6858 20.936 44.6858 20.008C44.6858 19.176 44.1418 18.888 43.1498 18.664L39.9818 17.96C37.6778 17.448 36.0138 16.168 36.0138 13.256C36.0138 9.608 39.4378 7.464 43.6618 7.464C48.0138 7.464 50.8298 9.896 50.8298 13.704H45.7738C45.7738 12.296 44.7498 11.368 43.3738 11.368C42.1258 11.368 41.1018 11.848 41.1018 12.776C41.1018 13.576 41.7418 13.928 42.6058 14.12L45.2618 14.728C48.0138 15.368 49.8698 16.584 49.8698 19.336ZM67.1198 19.336C67.1198 22.696 64.3358 25.32 59.3118 25.32C54.7678 25.32 51.5998 22.792 51.5998 18.888H56.6878C56.6878 20.264 57.7118 21.416 59.6638 21.416C60.8478 21.416 61.9358 20.936 61.9358 20.008C61.9358 19.176 61.3918 18.888 60.3998 18.664L57.2318 17.96C54.9278 17.448 53.2638 16.168 53.2638 13.256C53.2638 9.608 56.6878 7.464 60.9118 7.464C65.2638 7.464 68.0798 9.896 68.0798 13.704H63.0238C63.0238 12.296 61.9998 11.368 60.6238 11.368C59.3758 11.368 58.3518 11.848 58.3518 12.776C58.3518 13.576 58.9918 13.928 59.8558 14.12L62.5118 14.728C65.2638 15.368 67.1198 16.584 67.1198 19.336ZM78.6738 3.272C78.6738 5.224 76.8818 6.856 74.6738 6.856C72.9138 6.856 71.7618 5.8 71.7618 4.328C71.7618 2.376 73.5858 0.711998 75.7298 0.711998C77.5218 0.711998 78.6738 1.768 78.6738 3.272ZM74.1618 25H68.8818L71.9218 7.784H77.2018L74.1618 25ZM84.7 15.88L83.068 25H77.788L80.828 7.784H85.66L85.308 9.928C86.588 8.392 88.252 7.464 90.204 7.464C93.788 7.464 95.772 10.376 95.036 14.568L93.212 25H87.932L89.564 15.72C89.948 13.512 89.276 12.264 87.676 12.264C85.884 12.264 85.116 13.544 84.7 15.88ZM104.952 25.32C100.6 25.32 97.0158 22.568 97.0158 17.768C97.0158 11.816 101.048 7.464 106.456 7.464C111.992 7.464 114.552 12.072 113.656 17.736H102.52C102.616 19.752 103.608 20.808 105.368 20.808C106.616 20.808 107.416 20.232 107.896 19.112H113.336C111.896 23.496 108.728 25.32 104.952 25.32ZM106.424 11.624C104.6 11.624 103.512 12.776 102.968 14.408H108.792C108.76 12.936 107.992 11.624 106.424 11.624Z"/>
          {/* <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M113.5 1.5H111V6.50001H113.5C112.119 6.50001 111 7.61931 111 9.00001V11.5H116V9.00001C116 10.3807 117.119 11.5 118.5 11.5H121V6.50001H118.5C119.881 6.50001 121 5.38072 121 4V1.5H116V4C116 2.61929 114.881 1.5 113.5 1.5ZM116 6.50001H113.5C114.881 6.50001 116 7.61931 116 9.00001V6.50001ZM116 6.50001V4C116 5.38072 117.119 6.50001 118.5 6.50001H116Z"
          /> */}
        </svg>

      </a>
      <nav className=" space-x-7 font-grotesk text-body-3 sm:block">
        <a href="#about" className="group relative hidden md:inline-block">
          <span>about</span>
          <span className="absolute bottom-0 left-0 h-[0.125em] w-0 rounded-full bg-secondary-600 duration-300 ease-in-out group-hover:w-full"></span>
        </a>
        <a href="#services" className="group relative hidden md:inline-block">
          <span>services</span>
          <span className="absolute bottom-0 left-0 h-[0.125em] w-0 rounded-full bg-secondary-600 duration-300 ease-in-out group-hover:w-full"></span>
        </a>
        <a href="#works" className="group relative hidden md:inline-block">
          <span>projects</span>
          <span className="absolute bottom-0 left-0 h-[0.125em] w-0 rounded-full bg-secondary-600 duration-300 ease-in-out group-hover:w-full"></span>
        </a>
        <a
          ref={cta}
          className="button group relative hover:bg-transparent"
          href="#contact"
        >
          <span className="relative w-fit">
            <span className="absolute bottom-2 h-[0.15em] w-0 bg-secondary-700 opacity-90 duration-300 ease-out group-hover:w-full"></span>
            <span>Let&apos;s Talk.</span>
          </span>
        </a>
      </nav>
    </header>
  );
}
